<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>daily dose</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #111;
      color: #fff;
      
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      
      height: 100vh;
      text-align: center;
      padding: 20px;
      box-sizing: border-box;
      overflow: hidden;
    }
    
    #box {
      max-width: 600px;
      width: 100%;
      text-align: center;

      display: flex;
      flex-direction: column;
      height: 70vh;
    }

    h1 {
      line-height: 1.4;
      margin-bottom: 20px;
      opacity: 1;
      transition: opacity 0.4s ease;
    }

    h1.fade {
      opacity: 0;
    }

    .cursor {
      display: inline-block;
      margin-left: 4px;
      animation: cursorBlink 1s step-start infinite;
      opacity: 1;
    }
    
    @keyframes cursorBlink {
      50% {
        opacity: 0;
      }
    }
    .fade .cursor {
      opacity: 0;
    }

    #smiley {
      font-size: 80px;
      margin: 20px 0;
      opacity: 0;              /* Hidden by default */
      transform: scale(0.8);    /* Small starting size for bounce */
      transition: opacity 0.4s ease, transform 0.4s ease;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    #smiley.show {
      opacity: 1;
      animation: bounce 2s ease forwards;
    }

    @keyframes bounce {
      0%   { transform: scale(0.8) translateY(0); }
      30%  { transform: scale(1.1) translateY(-10px); }
      50%  { transform: scale(1) translateY(0); }
      70%  { transform: scale(1.05) translateY(-5px); }
      100% { transform: scale(1) translateY(0); }
    }

    #buttons {
      display: flex;
      justify-content: center;
      flex-wrap: wrap; /* Allows buttons to wrap on small screen */
      gap: 5px;
      margin-top: auto;
    }
    
    button {
      flex: 1 1 140px;
      max-width: 180px;
      padding: 10px 16px;
      font-size: 15px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      text-align: center;
      white-space: nowrap;
      margin-top: 5px;
      transition: transform 0.1s ease, box-shadow 0.1s ease;
    }

    button:active {
      transform: scale(0.96);
      box-shadow: inset 0 3px 6px rgba(0,0,0,0.35);
    }
    
  </style>
</head>
<body>

  <div id="box">
    <h1 id="text">
      <span id="message">Choose a Vibe</span><span class="cursor">|</span></h1>
    
    <div id="smiley"><span class="face">üòÑ</span></div>

    <div id="insight" style="display:none; margin-top:15px; font-size:15px; opacity:0.9;"></div>
    
    <div id="buttons">
    <button onclick="showMessage(jokes, 'jokes')">üòÑ Make me laugh</button>
    <button onclick="showMessage(lifts, 'lifts')">üíõ Lift me up</button>
    <button onclick="showMessage(facts, 'facts')">üß† Fun fact</button>
    <button onclick="showMessage(reflections, 'reflections')">üßò Reflect</button>
    <button id="insightBtn" onclick="getInsight()" style="display:none;">üîç Dig deeper</button>
    </div>
  </div>

  <script>

    /* Track current reflection */
    let currentReflection = null;
    
    /* Prevent message from repeating back to back */
    const lastShown = {
      jokes: null, 
      lifts: null, 
      facts: null,
      reflections: null
    };

    const jokes = [
      "Why don‚Äôt scientists trust atoms? Because they make up everything",
      "Why did the scarecrow win an award? He was outstanding in his field",
      "What do you call a fake noodle? An impasta",
      "Why did the math book look sad? Too many problems",
      "Why don‚Äôt skeletons fight each other? They don‚Äôt have the guts",
      "Why did the bicycle fall over? It was two tired",
      "Why don‚Äôt eggs tell jokes? They‚Äôd crack each other up",
      "What do you call cheese that isn‚Äôt yours? Nacho cheese",
      "Why did the computer go to the doctor? It caught a virus",
      "Why was six afraid of seven? Because seven eight nine",
      "Why did the golfer bring two pairs of pants? In case he got a hole in one",
      "Why did the coffee file a police report? It got mugged",
      "Why can‚Äôt your nose be 12 inches long? Because then it‚Äôd be a foot",
      "Why did the tomato blush? It saw the salad dressing",
      "Why did the calendar get nervous? Its days were numbered",
      "Why don‚Äôt oysters donate to charity? They‚Äôre shellfish",
      "Why did the cookie go to the doctor? It felt crummy",
      "Why did the computer sit down? It needed to reboot",
      "Why was the math lecture so long? The professor kept going off on a tangent",
      "Why don‚Äôt vampires use social media? Too many stakes",
      "Why did the music teacher go to jail? Too many sharp notes",
      "Why did the phone wear glasses? It lost its contacts",
      "Why did the belt get arrested? It was holding up a pair of pants",
      "Why did the picture go to jail? It was framed",
      "Why did the elevator break up with the stairs? It needed space",
      "Why did the programmer quit his job? Because he didn‚Äôt get arrays",
      "Why did the math book visit the therapist? It had too many unresolved issues",
      "Why don‚Äôt programmers like nature? Too many bugs",
      "Why did the scarecrow get promoted? He was outstanding in his field",
      "Why did the keyboard break up with the computer? It felt unappreciated",
      "Why did the golfer bring an extra sock? In case he got a hole in one",
      "Why did the stadium get hot after the game? All the fans left",
      "Why don‚Äôt cows have hobbies? They‚Äôre always moo-dy",
      "Why did the snowman call in sick? He had a meltdown",
      "Why did the bank hire a gardener? To help with interest",
      "Why did the computer sneeze? It caught a byte",
      "Why did the pencil stop working? It lost its point",
      "Why did the cookie sit in the sun? It wanted to be a smart cookie",
      "Why did the music note go to school? To improve its pitch",
      "Why did the fish get bad grades? It was below C level",
      "Why did the light bulb fail the test? It wasn‚Äôt very bright",
      "Why did the clock get kicked out of class? It kept ticking",
      "Why did the math student bring a ladder? To reach higher levels",
      "Why did the shoe go to therapy? It had too much sole-searching",
      "Why did the printer get glasses? It couldn‚Äôt focus on the text",
      "Why did the sandwich go to the gym? To get better buns",
      "Why did the computer stay calm? It had good cache control",
      "Why did the tree get a timeout? It was acting shady",
      "Why did the phone go on a diet? Too many cookies",
      "Why did the email break up with the inbox? Too many attachments"
    ];

    const lifts = [
      "You don‚Äôt have to do everything today, just one good thing",
      "Small progress still counts",
      "You‚Äôre allowed to take breaks without guilt",
      "Not everything needs to be perfect to be meaningful",
      "You‚Äôve handled harder things than this before",
      "Doing your best looks different every day",
      "You don‚Äôt need permission to rest",
      "Consistency matters more than intensity",
      "You‚Äôre learning even when it feels slow",
      "It‚Äôs okay to move at your own pace",
      "Your effort matters, even if no one sees it",
      "You‚Äôre not behind, you‚Äôre on your own timeline",
      "Momentum starts with one small step",
      "You can adjust the plan without quitting",
      "Progress isn‚Äôt always loud or obvious",
      "It‚Äôs okay to ask for help",
      "You‚Äôre allowed to change your mind",
      "One good choice can shift the whole day",
      "You don‚Äôt need to have it all figured out",
      "You‚Äôre doing better than you think",
      "Showing up counts",
      "You can be proud without being finished",
      "Rest is part of the work",
      "You‚Äôre capable, even on tired days",
      "This moment doesn‚Äôt define the whole story",
      "You‚Äôre allowed to start small",
      "Progress can be quiet and still be real",
      "You don‚Äôt have to rush what‚Äôs growing",
      "Some days, steady is a win",
      "It‚Äôs okay if today is about maintenance, not progress",
      "You can pause without losing momentum",
      "One task done is better than ten avoided",
      "You‚Äôre not failing‚Äîyou‚Äôre figuring it out",
      "Energy comes and goes; commitment carries you through",
      "You don‚Äôt owe productivity to anyone",
      "It‚Äôs okay to reset and try again",
      "Even imperfect action moves you forward",
      "You can take today as it comes",
      "Effort adds up, even when it feels invisible",
      "You‚Äôre building something, one step at a time",
      "Slow days still count as days",
      "You‚Äôre allowed to protect your peace",
      "You can do hard things gently",
      "Today‚Äôs version of you is enough",
      "You don‚Äôt have to earn rest",
      "Clarity often comes after action",
      "You‚Äôre making room for better days",
      "One breath, one step, one choice",
      "You‚Äôre not starting over‚Äîyou‚Äôre continuing",
      "Keep going, even if it‚Äôs quietly"
    ];

    const facts = [
      "Octopuses have three hearts and blue blood",
      "Honey never spoils and can last thousands of years",
      "Bananas are berries but strawberries aren‚Äôt",
      "A group of flamingos is called a flamboyance",
      "Sea otters hold hands while sleeping to avoid drifting apart",
      "Sharks existed before trees",
      "Wombat poop is cube-shaped",
      "There are more trees on Earth than stars in the Milky Way",
      "Butterflies can taste with their feet",
      "A day on Venus is longer than a year on Venus",
      "Scotland has over 400 words for snow",
      "Turtles can breathe through their butts",
      "The Eiffel Tower grows in summer",
      "Humans share about 60 percent of their DNA with bananas",
      "Some cats are allergic to humans",
      "There are more possible chess games than atoms in the universe",
      "A shrimp‚Äôs heart is in its head",
      "Sloths can hold their breath longer than dolphins",
      "Hot water freezes faster than cold water in some cases",
      "Koalas have fingerprints similar to humans",
      "There are more fake flamingos in the world than real ones",
      "A cloud can weigh over a million tons",
      "Octopuses can recognize individual humans",
      "The shortest war in history lasted 38 minutes",
      "You blink about 20,000 times a day",
      "Venus flytraps can count how many times their trigger hairs are touched",
      "A single teaspoon of honey is the lifetime work of about 12 bees",
      "Neutrinos pass through your body by the trillions every second",
      "Oxford University is older than the Aztec Empire",
      "Some metals explode when they touch water",
      "Saturn could float in water if a bathtub big enough existed",
      "Your brain uses about 20 percent of your body‚Äôs energy",
      "A cockroach can live without its head for about a week",
      "There are more neurons in your brain than stars in our galaxy",
      "The human body glows faintly due to biochemical reactions",
      "A bolt of lightning is hotter than the surface of the sun",
      "Rats laugh when they‚Äôre tickled",
      "Jellyfish have existed for over 500 million years",
      "Your stomach gets a new lining every few days",
      "Ants don‚Äôt have lungs",
      "The smell of rain has a name: petrichor",
      "Some turtles can live over 150 years",
      "A day on Mercury is longer than its year",
      "Plants can recognize their siblings",
      "Humans can have extra ribs",
      "Butterflies remember being caterpillars",
      "Your bones are stronger than steel by weight",
      "Sound travels four times faster in water than air",
      "Elephants can recognize themselves in mirrors",
      "Your body contains enough carbon to make thousands of pencils"
    ];

    const reflections = [
      "What do I actually need right now?",
      "What‚Äôs one thing that went okay today?",
      "What can wait until tomorrow?",
      "What am I holding onto that I can release?",
      "What would make today feel complete?",
      "What am I avoiding, and why?",
      "What‚Äôs one small win I might be overlooking?",
      "What would I tell a friend in this situation?",
      "What feels heavy right now?",
      "What feels lighter than it did before?",
      "What did I learn today, even unintentionally?",
      "What am I grateful for in this moment?",
      "What‚Äôs within my control right now?",
      "What‚Äôs one thing I can simplify?",
      "What‚Äôs draining my energy today?",
      "What‚Äôs giving me energy today?",
      "What deserves my attention next?",
      "What doesn‚Äôt need my attention anymore?",
      "What emotion am I feeling beneath the surface?",
      "What expectation can I loosen?",
      "What‚Äôs something I handled better than before?",
      "What am I proud of myself for?",
      "What‚Äôs one kind thing I can do for myself?",
      "What‚Äôs been on my mind lately?",
      "What‚Äôs one thing I can forgive myself for?",
      "What would rest look like right now?",
      "What‚Äôs one thing I don‚Äôt have to solve today?",
      "What assumption might I be making?",
      "What matters most in this moment?",
      "What am I resisting?",
      "What would help me feel grounded?",
      "What‚Äôs one truth I can remind myself of?",
      "What‚Äôs something I‚Äôve outgrown?",
      "What‚Äôs one thing I can do more gently?",
      "What‚Äôs actually going well?",
      "What do I need less of right now?",
      "What do I need more of right now?",
      "What‚Äôs one thing I can let be imperfect?",
      "What‚Äôs worth slowing down for?",
      "What‚Äôs one thought I can question?",
      "What‚Äôs one thing I can appreciate today?",
      "What‚Äôs one thing I‚Äôve already survived?",
      "What‚Äôs one thing I can trust myself with?",
      "What‚Äôs one thing I can leave unfinished?",
      "What would make tomorrow easier?",
      "What‚Äôs something I don‚Äôt say out loud enough?",
      "What feels uncertain, and that‚Äôs okay?",
      "What‚Äôs one step forward I can take?",
      "What‚Äôs one thing I can stop carrying?",
      "What‚Äôs enough for today?"
      ];

    /* Cache elements for displaying corresponding emoji */
    const messageEl = document.getElementById("message");
    const textWrapper = document.getElementById("text");
    const smiley = document.getElementById("smiley");
    const faceSpan = smiley.querySelector(".face");

    /* Typing effect */
    function typeText(element, text, speed = 25, callback) {
      element.textContent = "";
      let index = 0;

      function typeNext() {
        if (index < text.length) {
          element.textContent += text.charAt(index);
          index++;
          setTimeout(typeNext, speed);
        } else {
          if (callback) callback();
        }
      }

      typeNext();
    }
    
    /* Smiley based on category selected */
    function updateSmiley(categoryName) {
      if (categoryName === 'jokes') {
        faceSpan.textContent = 'üòÜ';
      } else if (categoryName === 'lifts') {
        faceSpan.textContent = 'üòå';
      } else if (categoryName === 'facts') {
        faceSpan.textContent = 'ü§ì';
      } else if (categoryName === 'reflections') {
        faceSpan.textContent = 'üßò';
      }
    }

    function showMessage(list, categoryName) {
      // Fade out message
      textWrapper.classList.add("fade");
      smiley.classList.remove("show"); // hide smiley before new message

      setTimeout(() => {
        // Pick a new message different from last shown
        let newMessage, randomIndex;
        do {
          randomIndex = Math.floor(Math.random() * list.length);
          newMessage = list[randomIndex];
        } while (newMessage === lastShown[categoryName] && list.length > 1);

        lastShown[categoryName] = newMessage;

        textWrapper.classList.remove("fade");

        // Update smiley for category
        updateSmiley(categoryName);

        // Type message, then show smiley
        typeText(messageEl, newMessage, 25, () => {
          smiley.classList.add("show");

          if (categoryName === "reflections") {
            currentReflection = newMessage;
            document.getElementById("insightBtn").style.display = "inline-block";
          } else {
            document.getElementById("insightBtn").sytle.display = "none";
            document.getElementById("insight").style.display = "none";
          }
        });
      }, 300);
    }
    /* Sends reflection text to backend, displays insight message, handles errors */
    async function getInsight() {
      if (!currentReflection) return;

      const insightEl = document.getElementById("insight");
      insightEl.style.display = "block";
      insightEl.textContent = "Thinking‚Ä¶";

      try {
        const response = await fetch("/api/insight", {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ reflection: currentReflection })
        });

        const data = await response.json();
        insightEl.textContent = data.insight;
      } catch (err) {
        insightEl.textContent = "Unable to get insight right now.";
      }
    }



    
  </script>

</body>
</html>







