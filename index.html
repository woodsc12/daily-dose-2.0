<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>daily dose</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    body {
      font-family: system-ui, -apple-system, BlinkMacSystemFont, sans-serif;
      background: #111;
      color: #fff;
      
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      
      height: 100vh;
      text-align: center;
      padding: 20px;
      box-sizing: border-box;
      overflow: hidden;
    }

    #message {
      white-space: pre-line;
    }

    #box {

      max-width: 600px;
      width: 100%;
      text-align: center;

      display: flex;
      flex-direction: column;
      height: 70vh;
    }

    h1 {
      line-height: 1.4;
      margin-top: 0;
      margin-bottom: 12px;
      opacity: 1;
      transition: opacity 0.4s ease;
    }

    h1.fade {
      opacity: 0;
    }

    .cursor {
      display: inline-block;
      margin-left: 4px;
      animation: cursorBlink 1s step-start infinite;
      opacity: 1;
    }
    
    @keyframes cursorBlink {
      50% {
        opacity: 0;
      }
    }
    .fade .cursor {
      opacity: 0;
    }

    #smiley {
      font-size: 80px;
      margin: 20px 0;
      opacity: 0;              /* Hidden by default */
      transform: scale(0.8);    /* Small starting size for bounce */
      transition: opacity 0.4s ease, transform 0.4s ease;
      display: flex;
      justify-content: center;
      align-items: center;
    }
    
    #smiley.show {
      opacity: 1;
      animation: bounce 2s ease forwards;
    }

    @keyframes bounce {
      0%   { transform: scale(0.8) translateY(0); }
      30%  { transform: scale(1.1) translateY(-10px); }
      50%  { transform: scale(1) translateY(0); }
      70%  { transform: scale(1.05) translateY(-5px); }
      100% { transform: scale(1) translateY(0); }
    }

    #buttons {
      display: flex;
      justify-content: center;
      flex-wrap: wrap; /* Allows buttons to wrap on small screen */
      gap: 5px;
      margin-top: auto;
    }
    
    button {
      flex: 1 1 140px;
      max-width: 180px;
      padding: 10px 16px;
      font-size: 15px;
      border: none;
      border-radius: 8px;
      cursor: pointer;
      text-align: center;
      white-space: nowrap;
      transition: transform 0.1s ease, box-shadow 0.1s ease;
    }

    button:active {
      transform: scale(0.96);
      box-shadow: inset 0 3px 6px rgba(0,0,0,0.35);
    }

    /* Welcome line CSS */
    #welcomeLine {
      font-size: 14px;
      opacity: 0;
      transition: opacity 2.5s ease-in-out;
      transition-delay: 0.05s;
      margin-bottom: 8px;
    }

    #welcomeLine.show {
      opacity: 0.75;
    }

  </style>
</head>
<body>

  <div id="box">
    
    <!-- Welcome line HTML -->
    <div id="welcomeLine"></div>

    <div id="greetingInputContainer" style="margin-bottom:15px;">
      <input
        id="userNameInput"
        type="text"
        placeholder="What is your name..."
        style="padding:6px 10px; border-radius:6px; border:1px solid #ccc; font-size:14px;"
      >
      <button id="submitNameBtn" style="padding:6px 10px; margin-left:5px; cursor:pointer; border-radius:6px;">Submit</button>
    </div>

    <h1 id="text">
      <span id="message">Choose a Vibe</span><span class="cursor">|</span></h1>
    <div id="smiley"><span class="face">ðŸ˜„</span></div>
    <div id="insight" style="display:none; margin-top:15px; font-size:15px; opacity:0.9;"></div>

<button
  id="digDeeperBtn"
  onclick="digDeeper()"
  style="
    display:none !important;  /* remove !important to re-enable the dig deeper button */
    align-self:center;
    font-size:11px;
    padding:2px 6px;
    margin:2px 0;
    background:#eef2f7;
    color:#444;
    border:1px solid #cfd6e0;
    border-radius:6px;
    cursor:pointer;
    line-height:1;
    height:auto;
    width:auto;
    flex: 0 0 auto;
    max-width:fit-content;
  "
>
  ðŸ”Ž Dig deeper
</button>

    <div id="buttons">
    <button onclick="showMessage(jokes, 'jokes')">ðŸ˜„ Make me laugh</button>
    <button onclick="showMessage(lifts, 'lifts')">ðŸ’› Lift me up</button>
    <button onclick="showMessage(facts, 'facts')">ðŸ§  Fun fact</button>
    <button onclick="showMessage(reflections, 'reflections')">ðŸ§˜ Reflect</button>
    </div>
  </div>

  <script>

    let availableVoices = [];

    function loadVoices() {
      availableVoices = speechSynthesis.getVoices();
    }

    speechSynthesis.onvoiceschanged = loadVoices;
    loadVoices();
    
    /* Track current reflection */
    let currentReflection = null;
    
    /* Prevent message from repeating back to back */
    const lastShown = {
      jokes: null, 
      lifts: null, 
      facts: null,
      reflections: null
    };

    const jokes = [
      "Why donâ€™t scientists trust atoms?\n\nBecause they make up everything",
      "Why did the scarecrow win an award?\n\nHe was outstanding in his field",
      "What do you call a fake noodle?\n\nAn impasta",
      "Why did the math book look sad?\n\nToo many problems",
      "Why donâ€™t skeletons fight each other?\n\nThey donâ€™t have the guts",
      "Why did the bicycle fall over?\n\nIt was two tired",
      "Why donâ€™t eggs tell jokes?\n\nTheyâ€™d crack each other up",
      "What do you call cheese that isnâ€™t yours?\n\nNacho cheese",
      "Why did the computer go to the doctor?\n\nIt caught a virus",
      "Why was six afraid of seven?\n\nBecause seven eight nine",
      "Why did the golfer bring two pairs of pants?\n\nIn case he got a hole in one",
      "Why did the coffee file a police report?\n\nIt got mugged",
      "Why canâ€™t your nose be 12 inches long?\n\nBecause then itâ€™d be a foot",
      "Why did the tomato blush?\n\nIt saw the salad dressing",
      "Why did the calendar get nervous?\n\nIts days were numbered",
      "Why donâ€™t oysters donate to charity?\n\nTheyâ€™re shellfish",
      "Why did the cookie go to the doctor?\n\nIt felt crummy",
      "Why did the computer sit down?\n\nIt needed to reboot",
      "Why did the math lecture go on so long?\n\nThe professor kept going off on a tangent",
      "Why donâ€™t vampires use social media?\n\nToo many stakes",
      "Why did the phone wear glasses?\n\nIt lost its contacts",
      "Why did the elevator break up with the stairs?\n\nIt needed space",
      "Why did the programmer quit his job?\n\nBecause he didnâ€™t get arrays",
      "Why donâ€™t programmers like nature?\n\nToo many bugs",
      "Why did the stadium get hot after the game?\n\nAll the fans left",
      "Why did the snowman call in sick?\n\nHe had a meltdown",
      "Why did the bank hire a gardener?\n\nTo help with interest",
      "Why did the pencil stop working?\n\nIt lost its point",
      "Why did the tree get a timeout?\n\nIt was acting shady",
      "Why did the email break up with the inbox?\n\nToo many attachments"
    ];




    const lifts = [
      "You donâ€™t have to do everything today, just one good thing",
      "Small progress still counts",
      "Youâ€™re allowed to take breaks without guilt",
      "Not everything needs to be perfect to be meaningful",
      "Youâ€™ve handled harder things than this before",
      "Doing your best looks different every day",
      "You donâ€™t need permission to rest",
      "Consistency matters more than intensity",
      "Youâ€™re learning even when it feels slow",
      "Itâ€™s okay to move at your own pace",
      "Your effort matters, even if no one sees it",
      "Youâ€™re not behind, youâ€™re on your own timeline",
      "Momentum starts with one small step",
      "You can adjust the plan without quitting",
      "Progress isnâ€™t always loud or obvious",
      "Itâ€™s okay to ask for help",
      "Youâ€™re allowed to change your mind",
      "One good choice can shift the whole day",
      "You donâ€™t need to have it all figured out",
      "Youâ€™re doing better than you think",
      "Showing up counts",
      "You can be proud without being finished",
      "Rest is part of the work",
      "Youâ€™re capable, even on tired days",
      "This moment doesnâ€™t define the whole story",
      "Youâ€™re allowed to start small",
      "Progress can be quiet and still be real",
      "You donâ€™t have to rush whatâ€™s growing",
      "Some days, steady is a win",
      "Itâ€™s okay if today is about maintenance, not progress",
      "You can pause without losing momentum",
      "One task done is better than ten avoided",
      "Youâ€™re not failingâ€”youâ€™re figuring it out",
      "Energy comes and goes; commitment carries you through",
      "You donâ€™t owe productivity to anyone",
      "Itâ€™s okay to reset and try again",
      "Even imperfect action moves you forward",
      "You can take today as it comes",
      "Effort adds up, even when it feels invisible",
      "Youâ€™re building something, one step at a time",
      "Slow days still count as days",
      "Youâ€™re allowed to protect your peace",
      "You can do hard things gently",
      "Todayâ€™s version of you is enough",
      "You donâ€™t have to earn rest",
      "Clarity often comes after action",
      "Youâ€™re making room for better days",
      "One breath, one step, one choice",
      "Youâ€™re not starting overâ€”youâ€™re continuing",
      "Keep going, even if itâ€™s quietly"
    ];

    const facts = [
      "Octopuses have three hearts and blue blood",
      "Honey never spoils and can last thousands of years",
      "Bananas are berries but strawberries arenâ€™t",
      "A group of flamingos is called a flamboyance",
      "Sea otters hold hands while sleeping to avoid drifting apart",
      "Sharks existed before trees",
      "Wombat poop is cube-shaped",
      "There are more trees on Earth than stars in the Milky Way",
      "Butterflies can taste with their feet",
      "A day on Venus is longer than a year on Venus",
      "Scotland has over 400 words for snow",
      "Turtles can breathe through their butts",
      "The Eiffel Tower grows in summer",
      "Humans share about 60 percent of their DNA with bananas",
      "Some cats are allergic to humans",
      "There are more possible chess games than atoms in the universe",
      "A shrimpâ€™s heart is in its head",
      "Sloths can hold their breath longer than dolphins",
      "Hot water freezes faster than cold water in some cases",
      "Koalas have fingerprints similar to humans",
      "There are more fake flamingos in the world than real ones",
      "A cloud can weigh over a million tons",
      "Octopuses can recognize individual humans",
      "The shortest war in history lasted 38 minutes",
      "You blink about 20,000 times a day",
      "Venus flytraps can count how many times their trigger hairs are touched",
      "A single teaspoon of honey is the lifetime work of about 12 bees",
      "Neutrinos pass through your body by the trillions every second",
      "Oxford University is older than the Aztec Empire",
      "Some metals explode when they touch water",
      "Saturn could float in water if a bathtub big enough existed",
      "Your brain uses about 20 percent of your bodyâ€™s energy",
      "A cockroach can live without its head for about a week",
      "There are more neurons in your brain than stars in our galaxy",
      "The human body glows faintly due to biochemical reactions",
      "A bolt of lightning is hotter than the surface of the sun",
      "Rats laugh when theyâ€™re tickled",
      "Jellyfish have existed for over 500 million years",
      "Your stomach gets a new lining every few days",
      "Ants donâ€™t have lungs",
      "The smell of rain has a name: petrichor",
      "Some turtles can live over 150 years",
      "A day on Mercury is longer than its year",
      "Plants can recognize their siblings",
      "Humans can have extra ribs",
      "Butterflies remember being caterpillars",
      "Your bones are stronger than steel by weight",
      "Sound travels four times faster in water than air",
      "Elephants can recognize themselves in mirrors",
      "Your body contains enough carbon to make thousands of pencils"
    ];

    const reflections = [
      "What do I actually need right now?",
      "Whatâ€™s one thing that went okay today?",
      "What can wait until tomorrow?",
      "What am I holding onto that I can release?",
      "What would make today feel complete?",
      "What am I avoiding, and why?",
      "Whatâ€™s one small win I might be overlooking?",
      "What would I tell a friend in this situation?",
      "What feels heavy right now?",
      "What feels lighter than it did before?",
      "What did I learn today, even unintentionally?",
      "What am I grateful for in this moment?",
      "Whatâ€™s within my control right now?",
      "Whatâ€™s one thing I can simplify?",
      "Whatâ€™s draining my energy today?",
      "Whatâ€™s giving me energy today?",
      "What deserves my attention next?",
      "What doesnâ€™t need my attention anymore?",
      "What emotion am I feeling beneath the surface?",
      "What expectation can I loosen?",
      "Whatâ€™s something I handled better than before?",
      "What am I proud of myself for?",
      "Whatâ€™s one kind thing I can do for myself?",
      "Whatâ€™s been on my mind lately?",
      "Whatâ€™s one thing I can forgive myself for?",
      "What would rest look like right now?",
      "Whatâ€™s one thing I donâ€™t have to solve today?",
      "What assumption might I be making?",
      "What matters most in this moment?",
      "What am I resisting?",
      "What would help me feel grounded?",
      "Whatâ€™s one truth I can remind myself of?",
      "Whatâ€™s something Iâ€™ve outgrown?",
      "Whatâ€™s one thing I can do more gently?",
      "Whatâ€™s actually going well?",
      "What do I need less of right now?",
      "What do I need more of right now?",
      "Whatâ€™s one thing I can let be imperfect?",
      "Whatâ€™s worth slowing down for?",
      "Whatâ€™s one thought I can question?",
      "Whatâ€™s one thing I can appreciate today?",
      "Whatâ€™s one thing Iâ€™ve already survived?",
      "Whatâ€™s one thing I can trust myself with?",
      "Whatâ€™s one thing I can leave unfinished?",
      "What would make tomorrow easier?",
      "Whatâ€™s something I donâ€™t say out loud enough?",
      "What feels uncertain, and thatâ€™s okay?",
      "Whatâ€™s one step forward I can take?",
      "Whatâ€™s one thing I can stop carrying?",
      "Whatâ€™s enough for today?"
      ];

    /* Cache elements for displaying corresponding emoji */
    const messageEl = document.getElementById("message");
    const textWrapper = document.getElementById("text");
    const smiley = document.getElementById("smiley");
    const faceSpan = smiley.querySelector(".face");

    const greetingContainer = document.getElementById("greetingInputContainer");
    const userNameInput = document.getElementById("userNameInput");
    const submitNameBtn = document.getElementById("submitNameBtn");

    const welcomeLine = document.getElementById("welcomeLine");

    const digDeeperBtn = document.getElementById("digDeeperBtn");
    digDeeperBtn.style.display = "none";

    
    let userName = localStorage.getItem("userName");
    
    if (userName) {
      // Already stored â†’ greet and hide input
      welcomeLine.textContent = `Welcome back ${userName}!`;
      setTimeout(() => {
        welcomeLine.classList.add("show");
      }, 50);

      messageEl.textContent = `Choose a Vibe`;
      greetingContainer.style.display = "none";
      
    }
    
    // Handle user submission
    submitNameBtn.addEventListener("click", () => {
      const inputName = userNameInput.value.trim();
      if (inputName) {
        userName = inputName;
        localStorage.setItem("userName", userName);
    
        // Welcome line (Step B)
        welcomeLine.textContent = `Welcome ${userName}!`;
        welcomeLine.classList.add("show");
    
        // Main message
        messageEl.textContent = "Choose a Vibe";
        greetingContainer.style.display = "none";
      }
    });

    
    // Optional: allow pressing Enter key
    userNameInput.addEventListener("keydown", (e) => {
      if (e.key === "Enter") {
        submitNameBtn.click();
      }
    });

    /* Typing effect */
    function typeText(element, text, typingSpeed = 50, callback) {
      element.textContent = "";
      let index = 0;

      function typeNext() {
        if (index < text.length) {
          element.textContent += text.charAt(index);
          index++;
          setTimeout(typeNext, typingSpeed); // use typingSpeed here
        } else {
          if (callback) callback();
        }
      }
    
      typeNext();
    }

    function speakText(text) {
      if (!("speechSynthesis" in window)) return;
    
      speechSynthesis.cancel();
    
      const utterance = new SpeechSynthesisUtterance(text);
    
      // Natural pacing
      utterance.rate = 0.9;
      utterance.pitch = 1.05;
      utterance.volume = 0.85;
    
      // Prefer smoother voices
      const preferredVoice =
        availableVoices.find(v => v.name.includes("Google US English")) ||
        availableVoices.find(v => v.name.includes("Google UK")) ||
        availableVoices.find(v => v.name.includes("Aria")) ||
        availableVoices.find(v => v.name.includes("Jenny")) ||
        availableVoices.find(v => v.name.includes("Samantha")) ||
        availableVoices.find(v => v.lang === "en-US");
    
      if (preferredVoice) {
        utterance.voice = preferredVoice;
      }
    
      speechSynthesis.speak(utterance);
    }
    
    /* Smiley based on category selected */
    function updateSmiley(categoryName) {
      if (categoryName === 'jokes') {
        faceSpan.textContent = 'ðŸ˜†';
      } else if (categoryName === 'lifts') {
        faceSpan.textContent = 'ðŸ˜Œ';
      } else if (categoryName === 'facts') {
        faceSpan.textContent = 'ðŸ¤“';
      } else if (categoryName === 'reflections') {
        faceSpan.textContent = 'ðŸ§˜';
      }
    }

    function showMessage(list, categoryName) {
      // Always hide dig deeper when a new category is selected
      welcomeLine.classList.remove("show"); // Hide welcome message upon selecting category
      document.getElementById("digDeeperBtn").style.display = "none";
      document.getElementById("insight").style.display = "none"; 
      
      // Fade out message
      textWrapper.classList.add("fade");
      smiley.classList.remove("show"); // hide smiley before new message

      setTimeout(() => {
        // Pick a new message different from last shown
        let newMessage, randomIndex;
        do {
          randomIndex = Math.floor(Math.random() * list.length);
          newMessage = list[randomIndex];
        } while (newMessage === lastShown[categoryName] && list.length > 1);

        lastShown[categoryName] = newMessage;

        textWrapper.classList.remove("fade");

        // Update smiley for category
        updateSmiley(categoryName);
        
        // Type message, then show smiley. If reflections category selected, show digdeeper button
        speakText(newMessage); // start voice
        
        typeText(messageEl, newMessage, 45, () => {
          smiley.classList.add("show");
          
          if (categoryName === "reflections") {
            currentReflection = newMessage;
            //document.getElementById("digDeeperBtn").style.display = "inline-block"; 
          } else {
            document.getElementById("digDeeperBtn").style.display = "none";
            document.getElementById("insight").style.display = "none"; 
          }
        });
      }, 300);
    }
    
  </script>

</body>
</html>




























